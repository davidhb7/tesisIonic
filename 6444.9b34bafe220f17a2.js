"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6444],{6444:(B,m,c)=>{c.r(m),c.d(m,{RegistroModule:()=>S});var d=c(1368),g=c(5224),f=c(1528),u=c(4716),R=c(508),o=c(4496),U=c(2340),C=c(124),_=c(9368),l=c(2112);function h(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Nombre Completo es requerido."),o.C$Y())}function v(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,h,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("nombreUsuario").errors.required)}}function G(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Cedula es requerida."),o.C$Y())}function I(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Por favor, ingrese solo n\xfameros."),o.C$Y())}function y(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,G,2,0,"p",18)(2,I,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("cedulausuario").errors.required),o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("cedulausuario").errors.pattern)}}function E(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Correo es requerido."),o.C$Y())}function Y(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Correo no es v\xe1lido."),o.C$Y())}function M(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,E,2,0,"p",18)(2,Y,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("correoUsuario").errors.required),o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("correoUsuario").errors.email)}}function b(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Celular es requerido."),o.C$Y())}function O(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Por favor, ingrese solo n\xfameros."),o.C$Y())}function x(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,b,2,0,"p",18)(2,O,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("celularUsuario").errors.required),o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("celularUsuario").errors.pattern)}}function $(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Direcci\xf3n es requerida."),o.C$Y())}function A(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,$,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("direccionUsuario").errors.required)}}function T(e,t){1&e&&(o.I0R(0,"p"),o.OEk(1,"Por favor, ingrese solo n\xfameros."),o.C$Y())}function k(e,t){if(1&e&&(o.I0R(0,"ion-text",17),o.yuY(1,T,2,0,"p",18),o.C$Y()),2&e){const s=o.GaO();o.yG2(),o.E7m("ngIf",s.formGroupRegistro.get("telefonoUsuario").errors.pattern)}}function H(e,t){1&e&&(o.I0R(0,"div",19),o.wR5(1,"ion-spinner",20),o.C$Y())}const N=[{path:"",component:(()=>{var e;class t{constructor(i,r,a,n,Q,p){this.formBuilderRegistro=i,this.serviciosAuthe=r,this.fireStroreService=a,this.serviciosInteraccion=n,this.router=Q,this.routerActivate=p,this.fechaHoy=new Date,this.cargando=!1,this.pase="",this.idPresenteParaEditar="",this.idPresenteParaEditar=p.snapshot.params.idUsuario,this.inicializarVacio(),this.editar_o_crear()}ngOnInit(){}inicializarVacio(){this.nuevoUsuario={idUsuario:"",identificacionUsuario:"",numeroReferenciaUsuarioConsumidor:0,nombreUsuario:"",correoUsuario:"",celularUsuario:"",direccionUsuario:"",telefonoUsuario:"",clave:"",idRol:"",disponibleOperario:!0,esActivo:!0,asignacionesActivas:0,fechaRegistro:""},this.formGroupRegistro=this.formBuilderRegistro.group({cedulausuario:["",u.AQ.pattern("[0-9]*")],nombreUsuario:["",[u.AQ.required]],correoUsuario:["",[u.AQ.required,u.AQ.email]],celularUsuario:["",[u.AQ.required,u.AQ.pattern("[0-9]*")]],direccionUsuario:["",[u.AQ.required]],telefonoUsuario:["",[u.AQ.pattern("[0-9]*")]]})}inicializarUsuarioBase(){let i=`${this.fechaHoy.getDate()}/${this.fechaHoy.getMonth()+1}/${this.fechaHoy.getFullYear()} ${this.fechaHoy.getHours()}:${this.fechaHoy.getMinutes()}`;this.nuevoUsuario={idUsuario:"",identificacionUsuario:"",numeroReferenciaUsuarioConsumidor:null,nombreUsuario:"",correoUsuario:"",celularUsuario:"",direccionUsuario:"",telefonoUsuario:"",clave:"",idRol:R.YJ,disponibleOperario:!0,esActivo:!0,asignacionesActivas:0,fechaRegistro:i}}editar_o_crear(){var i=this;return(0,f.c)(function*(){if(null!=i.idPresenteParaEditar||null!=i.idPresenteParaEditar){i.serviciosInteraccion.cargandoConMensaje("Cargando");const a=(yield i.fireStroreService.getDocumentSolo("Usuarios",i.idPresenteParaEditar)).data();i.nuevoUsuario={idUsuario:a.idUsuario||"",identificacionUsuario:a.cedulausuario||"",numeroReferenciaUsuarioConsumidor:a.numeroReferenciaUsuario||0,nombreUsuario:a.nombreUsuario||"",correoUsuario:a.correoUsuario||"",celularUsuario:a.celularUsuario||"",direccionUsuario:a.direccionUsuario||"",telefonoUsuario:a.telefonoUsuario||"",clave:a.clave||"",idRol:a.idRol||"",disponibleOperario:a.esActivo||"",esActivo:a.esActivo||"",asignacionesActivas:a.esActivo||0,fechaRegistro:a.fechaRegistro||""},i.serviciosInteraccion.cerrarCargando()}else i.inicializarUsuarioBase()})()}guardarUsuarioRegistro(){var i=this;return(0,f.c)(function*(){i.cargando=!0,i.nuevoUsuario.clave=i.nuevoUsuario.identificacionUsuario;const r=yield i.serviciosAuthe.registrarUsuarioRegistroAuthServices(i.nuevoUsuario.correoUsuario,i.nuevoUsuario.clave);r&&(i.serviciosInteraccion.mensajeGeneral("Usuario registrado correctamente"),i.nuevoUsuario.idUsuario=r.user.uid,yield i.fireStroreService.crearDocumentoGeneralPorID(i.nuevoUsuario,"Usuarios",r.user.uid.toString()),console.log(r.user.uid),console.log(r.user.uid.toString())),i.router.navigate(["/login"]),i.cargando=!1})()}}return(e=t).\u0275fac=function(i){return new(i||e)(o.GI1(u.im),o.GI1(U.G),o.GI1(C.$),o.GI1(_.T),o.GI1(g.E5),o.GI1(g.gV))},e.\u0275cmp=o.In1({type:e,selectors:[["app-registro"]],decls:49,vars:16,consts:[[3,"translucent"],["slot","start"],["defaultHref","/login"],[2,"margin-left","15px","font-weight","bold"],["color","blue"],[3,"formGroup"],["position","floating"],["formControlName","nombreUsuario","type","text","aria-label","nombreUsuario",3,"ngModel","ngModelChange"],["color","danger",4,"ngIf"],["formControlName","cedulausuario","type","tel","aria-label","cedulausuario",3,"ngModel","ngModelChange"],["formControlName","correoUsuario","type","email","aria-label","correoUsuario",3,"ngModel","ngModelChange"],["formControlName","celularUsuario","type","tel","aria-label","celularUsuario",3,"ngModel","ngModelChange"],["formControlName","direccionUsuario","type","text","aria-label","direccionUsuario",3,"ngModel","ngModelChange"],["formControlName","telefonoUsuario","type","tel","aria-label","telefonoUsuario",3,"ngModel","ngModelChange"],["type","submit","color","success",2,"margin-left","10px","font-size","9px",3,"disabled","click"],["style","text-align:center;"],[2,"margin-left","15px"],["color","danger"],[4,"ngIf"],[2,"text-align","center"],["name","bubbles"]],template:function(i,r){1&i&&(o.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.wR5(3,"ion-back-button",2),o.C$Y(),o.I0R(4,"ion-title"),o.OEk(5," Registro Usuario "),o.C$Y()()(),o.I0R(6,"ion-content")(7,"ion-card")(8,"p",3),o.OEk(9,"Confirma correctamente que eres parte de la asociacion comunitaria de San Jos\xe9 del Salado - Dagua - Valle del Cauca"),o.C$Y(),o.wR5(10,"hr",4),o.I0R(11,"form",5)(12,"ion-item")(13,"ion-label",6),o.OEk(14,"Nombre Completo:"),o.C$Y(),o.I0R(15,"ion-input",7),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.nombreUsuario,n)||(r.nuevoUsuario.nombreUsuario=n),n}),o.C$Y()(),o.yuY(16,v,2,1,"ion-text",8),o.I0R(17,"ion-item")(18,"ion-label",6),o.OEk(19,"Cedula:"),o.C$Y(),o.I0R(20,"ion-input",9),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.identificacionUsuario,n)||(r.nuevoUsuario.identificacionUsuario=n),n}),o.C$Y()(),o.yuY(21,y,3,2,"ion-text",8),o.I0R(22,"ion-item")(23,"ion-label",6),o.OEk(24,"Correo:"),o.C$Y(),o.I0R(25,"ion-input",10),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.correoUsuario,n)||(r.nuevoUsuario.correoUsuario=n),n}),o.C$Y()(),o.yuY(26,M,3,2,"ion-text",8),o.I0R(27,"ion-item")(28,"ion-label",6),o.OEk(29,"Celular:"),o.C$Y(),o.I0R(30,"ion-input",11),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.celularUsuario,n)||(r.nuevoUsuario.celularUsuario=n),n}),o.C$Y()(),o.yuY(31,x,3,2,"ion-text",8),o.I0R(32,"ion-item")(33,"ion-label",6),o.OEk(34,"Direcci\xf3n:"),o.C$Y(),o.I0R(35,"ion-input",12),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.direccionUsuario,n)||(r.nuevoUsuario.direccionUsuario=n),n}),o.C$Y()(),o.yuY(36,A,2,1,"ion-text",8),o.I0R(37,"ion-item")(38,"ion-label",6),o.OEk(39,"Tel\xe9fono Fijo:"),o.C$Y(),o.I0R(40,"ion-input",13),o.iHE("ngModelChange",function(n){return o.kNx(r.nuevoUsuario.telefonoUsuario,n)||(r.nuevoUsuario.telefonoUsuario=n),n}),o.C$Y()(),o.yuY(41,k,2,1,"ion-text",8),o.I0R(42,"ion-button",14),o.qCj("click",function(){return r.guardarUsuarioRegistro()}),o.OEk(43,"Enviar"),o.C$Y()(),o.yuY(44,H,2,0,"div",15),o.I0R(45,"p",16)(46,"strong"),o.OEk(47,"Nota: "),o.C$Y(),o.OEk(48,"Atencion al usuario, exclusivamente para el Queremal."),o.C$Y()()()),2&i&&(o.E7m("translucent",!0),o.yG2(11),o.E7m("formGroup",r.formGroupRegistro),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.nombreUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("nombreUsuario").invalid&&r.formGroupRegistro.get("nombreUsuario").touched),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.identificacionUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("cedulausuario").invalid&&r.formGroupRegistro.get("cedulausuario").touched),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.correoUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("correoUsuario").invalid&&r.formGroupRegistro.get("correoUsuario").touched),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.celularUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("celularUsuario").invalid&&r.formGroupRegistro.get("celularUsuario").touched),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.direccionUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("direccionUsuario").invalid&&r.formGroupRegistro.get("direccionUsuario").touched),o.yG2(4),o.OKB("ngModel",r.nuevoUsuario.telefonoUsuario),o.yG2(),o.E7m("ngIf",r.formGroupRegistro.get("telefonoUsuario").invalid&&r.formGroupRegistro.get("telefonoUsuario").touched),o.yG2(),o.E7m("disabled",r.formGroupRegistro.invalid),o.yG2(2),o.C0Y(44,r.cargando?44:-1))},dependencies:[d.u_,u.sz,u.ue,u.u,l.sn,l.GS,l.KC,l._i,l.wB,l.A5,l.Yb,l.QR,l.YA,l.Wg,l.tM,l.Md,l.qG,l.Im,u.uW,u.Wo]}),t})()}];let P=(()=>{var e;class t{}return(e=t).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.a4G({type:e}),e.\u0275inj=o.s3X({imports:[g.qQ.forChild(N),g.qQ]}),t})(),S=(()=>{var e;class t{}return(e=t).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.a4G({type:e}),e.\u0275inj=o.s3X({imports:[P,d.MD,u.y,l.wZ,u.sl]}),t})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8768],{8768:(E,m,u)=>{u.r(m),u.d(m,{ReportesPageModule:()=>O});var R=u(1368),p=u(5224),l=u(1528),e=u(4496),d=u(124),C=u(9368),c=u(2112);function _(t,s){1&t&&(e.I0R(0,"h3",6),e.OEk(1,"No hay reportes..."),e.C$Y())}function g(t,s){1&t&&(e.I0R(0,"div",12),e.wR5(1,"ion-spinner",13),e.C$Y())}function f(t,s){if(1&t){const n=e.KQA();e.I0R(0,"ion-item")(1,"ion-label"),e.OEk(2),e.I0R(3,"p"),e.OEk(4),e.C$Y(),e.I0R(5,"p"),e.OEk(6,"Estado:"),e.C$Y(),e.I0R(7,"p",7),e.OEk(8),e.C$Y()(),e.yuY(9,g,2,0,"div",8),e.I0R(10,"ion-button",9),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.eliminarReporte(r))}),e.OEk(11,"Eliminar"),e.C$Y(),e.I0R(12,"ion-button",10),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.navegarConIDVerReporte(r.idReporte))}),e.OEk(13,"Ver"),e.C$Y(),e.I0R(14,"ion-button",11),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.navegarConIDEditarReporte(r.idReporte))}),e.OEk(15,"Editar"),e.C$Y()()}if(2&t){const n=s.$implicit,o=e.GaO();e.yG2(2),e.oRS(" Reporte numero: ",n.numeroReporte," "),e.yG2(2),e.oRS("Descripcipon: ",n.descripcion,""),e.yG2(4),e.oRS(" ",n.estado,""),e.yG2(),e.C0Y(9,o.cargando?9:-1)}}function v(t,s){1&t&&(e.I0R(0,"div",12),e.wR5(1,"ion-spinner",13),e.C$Y())}function h(t,s){if(1&t){const n=e.KQA();e.I0R(0,"ion-item")(1,"ion-label"),e.OEk(2),e.I0R(3,"p"),e.OEk(4),e.C$Y(),e.I0R(5,"p"),e.OEk(6,"Estado:"),e.C$Y(),e.I0R(7,"p",7),e.OEk(8),e.C$Y()(),e.yuY(9,v,2,0,"div",8),e.I0R(10,"ion-button",9),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.eliminarReporte(r))}),e.OEk(11,"Eliminar"),e.C$Y(),e.I0R(12,"ion-button",10),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.navegarConIDVerReporte(r.idReporte))}),e.OEk(13,"Ver"),e.C$Y(),e.I0R(14,"ion-button",11),e.qCj("click",function(){const r=e.usT(n).$implicit,a=e.GaO();return e.CGJ(a.navegarConIDEditarReporte(r.idReporte))}),e.OEk(15,"Editar"),e.C$Y()()}if(2&t){const n=s.$implicit,o=e.GaO();e.yG2(2),e.oRS(" Reporte numero: ",n.numeroReporte," "),e.yG2(2),e.oRS("Descripcipon: ",n.descripcion,""),e.yG2(4),e.oRS(" ",n.estado,""),e.yG2(),e.C0Y(9,o.cargando?9:-1)}}const G=[{path:"",component:(()=>{var t;class s{constructor(o,i,r,a){this.router=o,this.route=i,this.serviciosFireStoreDatabase=r,this.serviciosInteraccion=a,this.documentosReportes=[],this.documentosGeneralesReportes=[],this.cargando=!1,this.idUsuarioPresente=i.snapshot.params.idUsuario,this.avisoExisteReporte(),this.tipoUsuario()}ngOnInit(){}getReportesGeneralesEmpresaOperario(){this.serviciosFireStoreDatabase.getDocumentosGeneralAtentoCambios("Reportes").subscribe(o=>{o&&(this.documentosGeneralesReportes=o,console.log("Respuesta general: ",o))})}avisoExisteReporte(){this.hayReportes=this.documentosReportes.length>=0||this.documentosGeneralesReportes.length>=0}getReportesParaUsuariosObservable(){var o=this;return(0,l.c)(function*(){o.serviciosFireStoreDatabase.getReportesParaUsuariosObservable(o.idUsuarioPresente).subscribe({next:i=>{o.documentosReportes=i}})})()}navegarFormularioCrearReporte(){this.router.navigate(["/crear-reporte"]),console.log("sin id")}eliminarReporte(o){var i=this;return(0,l.c)(function*(){i.cargando=!0,yield i.serviciosFireStoreDatabase.eliminarDocPorID("Reportes",o.idReporte),i.cargando=!1})()}navegarConIDVerReporte(o){this.router.navigate(["/reporte",o]),console.log("enviando id",o)}navegarConIDEditarReporte(o){var i=this;return(0,l.c)(function*(){i.router.navigate(["/crear-reporte",o]),console.log("enviando id editar",o)})()}tipoUsuario(){var o=this;return(0,l.c)(function*(){o.serviciosInteraccion.cargandoConMensaje("Cargando");const r=(yield o.serviciosFireStoreDatabase.getDocumentSolo("Usuarios",o.idUsuarioPresente)).data();o.usuarioPresente={idUsuario:r.idUsuario||"",identificacionUsuario:r.cedulausuario||"",numeroReferenciaUsuarioConsumidor:r.numeroReferenciaUsuario||0,nombreUsuario:r.nombreUsuario||"",correoUsuario:r.correoUsuario||"",celularUsuario:r.celularUsuario||"",direccionUsuario:r.direccionUsuario||"",telefonoUsuario:r.telefonoUsuario||"",clave:r.clave||"",idRol:r.idRol||"",disponibleOperario:r.esActivo||!0,esActivo:r.esActivo||!0,asignacionesActivas:r.esActivo||0,fechaRegistro:r.fechaRegistro||""},console.log(o.usuarioPresente),o.serviciosInteraccion.cerrarCargando(),o.mostrarReportesSegunUsuario()})()}mostrarReportesSegunUsuario(){"1"==this.usuarioPresente.idRol||"2"==this.usuarioPresente.idRol||"3"==this.usuarioPresente.idRol?this.getReportesGeneralesEmpresaOperario():"4"==this.usuarioPresente.idRol?this.getReportesParaUsuariosObservable():this.hayReportes=!1}}return(t=s).\u0275fac=function(o){return new(o||t)(e.GI1(p.E5),e.GI1(p.gV),e.GI1(d.$),e.GI1(C.T))},t.\u0275cmp=e.In1({type:t,selectors:[["app-reportes"]],decls:13,vars:4,consts:[[3,"translucent"],["slot","start"],["defaultHref","/menu"],["style","margin-left: 10px;",4,"ngIf"],[2,"margin-left","10px",3,"click"],[4,"ngFor","ngForOf"],[2,"margin-left","10px"],[2,"color","green"],["style","text-align:center;"],["color","danger",2,"font-size","8px",3,"click"],["color","success",2,"font-size","8px",3,"click"],["color","warning",2,"font-size","8px",3,"click"],[2,"text-align","center"],["name","bubbles"]],template:function(o,i){1&o&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.wR5(3,"ion-back-button",2),e.C$Y(),e.I0R(4,"ion-title"),e.OEk(5," Reportes "),e.C$Y()()(),e.I0R(6,"ion-content"),e.yuY(7,_,2,0,"h3",3),e.I0R(8,"ion-list")(9,"ion-button",4),e.qCj("click",function(){return i.navegarFormularioCrearReporte()}),e.OEk(10,"Crear nuevo reporte"),e.C$Y(),e.yuY(11,f,16,4,"ion-item",5)(12,h,16,4,"ion-item",5),e.C$Y()()),2&o&&(e.E7m("translucent",!0),e.yG2(7),e.E7m("ngIf",!i.hayReportes),e.yG2(4),e.E7m("ngForOf",i.documentosReportes),e.yG2(),e.E7m("ngForOf",i.documentosGeneralesReportes))},dependencies:[R.ay,R.u_,c.sn,c.GS,c._i,c.wB,c.Yb,c.QR,c.OC,c.YA,c.tM,c.Md,c.Im]}),s})()}];let I=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[p.qQ.forChild(G),p.qQ]}),s})();var b=u(4716);let O=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[R.MD,I,c.wZ,b.y]}),s})()}}]);
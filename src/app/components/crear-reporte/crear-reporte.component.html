<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button  [defaultHref]="'/reportes/' + idPresenteDeUsuario"></ion-back-button>
    </ion-buttons>
    <ion-title>
      Crear reporte
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>

    <!-- Campo para el Número de Reporte -->
    <ion-item>
      <ion-label position="floating">Número de Reporte:</ion-label>
      <ion-input type="text" name="numeroReporte" aria-label="number" [(ngModel)]="nuevoReporte.numeroReporte" disabled="true" re></ion-input>
    </ion-item>

    <!-- Campo para la Descripción -->
    <ion-item>
      <ion-label position="floating" >Descripción *</ion-label>
      <ion-textarea type="text" name="descripcion" [(ngModel)]="nuevoReporte.descripcion" aria-label="text"></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label (click)="tomarubicacion()">
        Posicion actual: <p>{{nuevoReporte.ubicacion}}</p>
      </ion-label>
      <ion-icon name="location-outline" color="danger" (click)="tomarubicacion()"></ion-icon>
    </ion-item>




    <ion-item>
      <ion-label>Fotos de galeria:</ion-label>
      <ion-buttons slot="end">
        <label for="carga-archivo">
          <ion-icon slot="icon-only" name="image-outline"></ion-icon>
        </label>
        <!-- ABRIR EXPLORADOR DE ARCHIVOS/GALERIA PARA CARGAR LAS FOTOS -->
        <input type="file" accept="image/*" style="display: none;" id="carga-archivo" (change)="subirFotoCrearReporte($event)">
      </ion-buttons>
    </ion-item>


    <!-- <ion-item>
      <p>Fotos Seleccionadas</p>
    </ion-item>
    <ion-item class="imagen" *ngFor="let urlFoto of enlacesFotos">
      <img src="{{urlFoto}}" alt=""  style="margin: 10px; border-radius: 10px; height: 10; width: 20;">
      <ion-icon name="close-circle-outline" color="danger" (click)="eliminarFoto(urlFoto)"></ion-icon>
    </ion-item> -->

    <ion-item class="imagen" *ngFor="let urlFoto of enlacesFotos">
      <div style="display: flex; flex-direction: column; align-items: center;">
        <img src="{{urlFoto}}" alt="" style="margin: 10px; border-radius: 10px; height: 100px; width: 200px;">
        <ion-icon name="close-circle-outline" color="danger" (click)="eliminarFoto(urlFoto)" style="margin-top: 5px; margin-bottom: 10px;"></ion-icon>
      </div>
    </ion-item>
    <!-- <ion-item>
      <ion-label (click)="tomarFoto()">
        Camara:
      </ion-label>
      <ion-icon name="camera" (click)="tomarFoto()"></ion-icon>
    </ion-item> -->



    <!-- TODO -->
    <!-- IMPLEMENTAR EL ACCESO A LA CAMARA -->

    <!-- <ion-item>
      <img [src]="nuevaFoto" alt="Sin fotos de reporte">
    </ion-item> -->




    <!-- Botón para enviar el formulario -->
    <ion-button type="submit" (click)="guardarRegistro()" style="margin-left: 10px; margin-top: 10px; font-size: 9px;" color="success">Enviar</ion-button>

    @if (cargando) {
      <div style="text-align:center;">
        <ion-spinner name="bubbles"></ion-spinner>
      </div>
    }
    <p style="margin-left: 10px; color: orange;" >  <strong>Reportes realizados:</strong> {{numeroActualReportes}}</p>

  </ion-card>
</ion-content>







"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4992],{4992:(D,g,c)=>{c.r(g),c.d(g,{ReportePageModule:()=>G});var d=c(1368),l=c(5224),u=c(1528),e=c(4496),C=c(124),h=c(9368),n=c(2112),f=c(9616);let M=(()=>{var t;class a{constructor(o){this.serviciosInteraccion=o,this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer}ngAfterViewInit(){this.initMap(),this.trackLocation()}initMap(){var o=this;return(0,u.c)(function*(){const i=document.getElementById("map");o.map=yield new google.maps.Map(i,{center:{lat:3.523303,lng:-76.712034},zoom:14}),o.directionsRenderer.setMap(o.map)})()}trackLocation(){var o=this;return(0,u.c)(function*(){const i=yield f.G.getCurrentPosition(),r={lat:i.coords.latitude,lng:i.coords.longitude};o.userMarker=new google.maps.Marker({position:r,map:o.map,title:"Mi ubicaci\xf3n"}),o.map.setCenter(r),o.calculateAndDisplayRoute(r),f.G.watchPosition({},(p,m)=>{p&&o.updateUserLocation({lat:p.coords.latitude,lng:p.coords.longitude})})})()}updateUserLocation(o){this.userMarker&&this.userMarker.setPosition(o),this.map.setCenter(o),this.calculateAndDisplayRoute(o)}calculateAndDisplayRoute(o){this.coordinates&&this.directionsService.route({origin:o,destination:{lat:this.coordinates.lat,lng:this.coordinates.lng},travelMode:google.maps.TravelMode.DRIVING,optimizeWaypoints:!0},(r,p)=>{"OK"===p?this.directionsRenderer.setDirections(r):window.alert("La solicitud de direcciones fall\xf3 debido a "+p)})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.GI1(h.T))},t.\u0275cmp=e.In1({type:t,selectors:[["app-google-maps"]],inputs:{coordinates:"coordinates"},decls:3,vars:0,consts:[["id","map"],["map",""]],template:function(o,i){1&o&&(e.I0R(0,"ion-content"),e.wR5(1,"capacitor-google-map",0,1),e.C$Y())},dependencies:[n._i],styles:["capacitor-google-map[_ngcontent-%COMP%]{display:inline-block;width:400px;height:400px;border-radius:10px;margin:10px}"]}),a})();function y(t,a){if(1&t&&(e.I0R(0,"ion-item"),e.wR5(1,"img",7),e.C$Y()),2&t){const s=a.$implicit;e.yG2(),e._6D("src",s.urlFoto,e.K6U)}}const v=[{path:"",component:(()=>{var t;class a{constructor(o,i,r){this.servicioFireStore=o,this.route=i,this.serviciosInteraccion=r,this.fotosDeReporte=[],this.idPresenteReporte=i.snapshot.params.idReporte,this.inicializarEnVacio(),this.getReporteSoloVer(),this.getFotosPorIdReporte()}ngOnInit(){}inicializarEnVacio(){this.reporte={idReporte:"",numeroReporte:0,descripcion:"",ubicacion:"",fechaRegistroReporte:"",fechaAtencionReporte:"",fechaFinReporte:"",idUsuario:"",idOperador:"",idEmpresa:"",idFoto:"",estado:""}}getReporteSoloVer(){var o=this;return(0,u.c)(function*(){const r=(yield o.servicioFireStore.getDocumentSolo("Reportes",o.idPresenteReporte)).data();o.reporte={idReporte:r.idReporte||"",numeroReporte:r.numeroReporte||0,descripcion:r.descripcion||"",ubicacion:r.ubicacion||"",fechaRegistroReporte:r.fechaRegistroReporte||"",fechaAtencionReporte:r.fechaAtencionReporte||"",fechaFinReporte:r.fechaFinReporte||"",idUsuario:r.idUsuario||"",idOperador:r.idOperador||"",idEmpresa:r.idEmpresa||"",idFoto:r.idFoto||"",estado:r.estado||""},o.actualizarUbicacionReporte(o.reporte.ubicacion)})()}getFotosPorIdReporte(){this.servicioFireStore.getFotosSegunReporteObservable(this.idPresenteReporte).subscribe({next:o=>{this.fotosDeReporte=o}})}actualizarUbicacionReporte(o){const[i,r]=o.split(" "),p=parseFloat(i),m=parseFloat(r);console.log("Destino desde reporte",p,m),this.destinationLocation={lat:p,lng:m}}}return(t=a).\u0275fac=function(o){return new(o||t)(e.GI1(C.$),e.GI1(l.gV),e.GI1(h.T))},t.\u0275cmp=e.In1({type:t,selectors:[["app-reporte"]],decls:31,vars:8,consts:[[3,"translucent"],["slot","start"],["defaultHref","/menu"],[2,"font-weight","bold","color","white"],[2,"color","green"],[4,"ngFor","ngForOf"],[3,"coordinates"],["alt","Fotos del reporte",2,"border-radius","10px",3,"src"]],template:function(o,i){1&o&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.wR5(3,"ion-back-button",2),e.C$Y(),e.I0R(4,"ion-title"),e.OEk(5," Reporte "),e.C$Y()()(),e.I0R(6,"ion-content")(7,"ion-list")(8,"ion-card")(9,"ion-card-header"),e.wR5(10,"ion-card-title"),e.I0R(11,"ion-card-subtitle",3),e.OEk(12,"Identificacion del reporte:"),e.C$Y(),e.I0R(13,"p"),e.OEk(14),e.C$Y()(),e.I0R(15,"ion-card-content")(16,"strong"),e.OEk(17),e.C$Y(),e.I0R(18,"p"),e.OEk(19),e.C$Y(),e.I0R(20,"p"),e.OEk(21),e.C$Y(),e.I0R(22,"p",4),e.OEk(23),e.C$Y(),e.yuY(24,y,2,1,"ion-item",5),e.C$Y()()(),e.I0R(25,"ion-header")(26,"ion-toolbar")(27,"ion-title"),e.OEk(28,"Mapa Acua Reportes"),e.C$Y()()(),e.I0R(29,"ion-content"),e.wR5(30,"app-google-maps",6),e.C$Y()()),2&o&&(e.E7m("translucent",!0),e.yG2(14),e.cNF(i.idPresenteReporte),e.yG2(3),e.oRS("Reporte numero: ",i.reporte.numeroReporte,""),e.yG2(2),e.oRS("Descripcipon expecifica: ",i.reporte.descripcion,""),e.yG2(2),e.oRS("Coordenadas ",i.reporte.ubicacion,""),e.yG2(2),e.cNF(i.reporte.estado),e.yG2(),e.E7m("ngForOf",i.fotosDeReporte),e.yG2(6),e.E7m("coordinates",i.destinationLocation))},dependencies:[d.ay,n.GS,n.KC,n.Gg,n.YY,n.MN,n.I7,n._i,n.wB,n.Yb,n.OC,n.tM,n.Md,n.Im,M]}),a})()}];let I=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[l.qQ.forChild(v),l.qQ]}),a})();var R=c(4716);let F=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[d.MD,n.wZ,R.y,R.sl]}),a})(),G=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[d.MD,I,n.wZ,R.y,F]}),a})()}}]);